<%= csrf_meta_tag %>
<script> 
// so we can access the correct urls in the .js files
var flashcard_url = "<%= url_for(controller:'courses', action:'flashcard') %>";
var note_upload_url = "<%= url_for(controller:'courses', action:'updateNotes') %>";
</script>
<center>
  <br>
    <div>
      <h1> <%= @course.code %>: <%= @course.title %></h1>
      <ul class="nav nav-pills nav-justified">
        <li class = "active"><%= link_to "Course", user_course_path(@user, @course) %><br></li>
        <li><%= link_to "Edit Course", edit_user_course_path(@user, @course) %><br></li>
        <li><%= link_to "Student Roster", user_course_students_path(@user, @course) %><br></li>
        <li><%= link_to "Face/Name Quiz", {controller:"courses", action:"quiz"} %><br></li>
      </ul>
      <div class = "container">
        <div class="row">
          <div class="col-lg-4">
            <h3> Actions</h3>
            <%= link_to "Edit Course", edit_user_course_path(@user, @course) %><br>
            <%= link_to "All Courses", user_courses_path(@user) %><br>
            <%= link_to "Account", user_path(@user) %><br>
            <%= link_to "Add Student", new_user_course_student_path(@user, @course) %><br>
            <%= link_to "Add Assignment", new_user_course_assignment_path(@user, @course) %>
          </div>
          <div class = "col-lg-4">
            <h2>Assignments</h2>
            <table>
              <thead>
                <tr><th>Name</th><th>Description</th><th>ID</th><th></th>
              </thead>
              <tbody>
                <% @course.assignments[0..5].each do |assignment| %>
                  <tr>
                    <td><%= assignment.name %></td>
                    <td><%= truncate assignment.description, length: 30, separator: /\w+/ %></td>
                    <td><%= assignment.id %></td>
                    <td><%= link_to "View", user_course_assignment_path(@user, @course, assignment) %></td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
          <div class = "col-lg-4">
            <h3>Flashcards</h3>
              <div class = "flashcard" id="flashcard-info">
                <%= image_tag "/images/defaults/flashcard/missing.png", :id => "student-picture", :style => "width:300px;height:300px;" %>
                <h4 id="student-name">Name</h4>
                <p id="student-info">info</p>
                <textarea rows=5 id="student-notes" onkeyup="updateNotes()"></textarea>
              </div>
              <button type="button" class ="btn" onclick="drawFlashcard('dashboard')">Draw Flashcard</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </br>
</center>